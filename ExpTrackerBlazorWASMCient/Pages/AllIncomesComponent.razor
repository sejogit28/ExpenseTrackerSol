@page "/incomes"

@inject IIncomesScreenUseCases IncomesScreenUseCases

    <div class="row justify-content-center">
        <h3>A full list of all incomes<i class="bi bi-list-ul"></i></h3>
    </div>
    @if (allIncomes != null)
    {

        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Income Id</th>
                    <th scope="col">User Id</th>
                    <th scope="col">Income Type</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Notes</th>
                    <th scope="col">Date Paid</th>
                    <th scope="col">Date Submitted</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var income in allIncomes)
                {
                    <tr>
                        <th scope="row">@income.IncomeId</th>
                        <th scope="row">@income.UserId</th>
                        <th scope="row">@income.IncomeTypes</th>
                        <th scope="row">@income.Amount</th>
                        <th scope="row">@income.Notes</th>
                        <th scope="row"><NavLink href="@($"/incomes/bymonth/{income.MonthYear}")">@income.DatePaid.ToShortDateString()</NavLink></th>
                        <th scope="row">@income.DateSubmitted.ToShortDateString()</th>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <h2>
            Fetching Info...
            <div class="spinner-border" style="width: 3rem; height: 3rem;" role="status">

            </div>
        </h2>
    }



    @code
{
        IEnumerable<Incomes> allIncomes;

        protected override async Task OnInitializedAsync()
        {
            allIncomes = await IncomesScreenUseCases.ViewAllIncomes();
        }
    }
